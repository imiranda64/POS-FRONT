"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[181],{52181:(Ot,Z,a)=>{a.r(Z),a.d(Z,{ProductModule:()=>Et});var u=a(69808),P=a(68555),$=a(16496),Y=a(49597),B=a(48535),c=a(82349),p=a(11612),A=a(28222);const j=[{label:"C\xf3digo",value:1,placeholder:"Buscar por C\xf3digo",validation:[A.R.alphanumeric],validation_desc:"S\xf3lo se permite letras y/o n\xfameros en esta b\xfasqueda.",icon:"icName"},{label:"Nombre",value:2,placeholder:"Buscar por Nombre",validation:[A.R.defaultName],validation_desc:"S\xf3lo se permite letras en esta b\xfasqueda.",icon:"icName"}],G=[{type:"link",id:"all",icon:p.j.prototype.getIcon("icViewHeadline"),label:"Todos"},{type:"link",id:"Activo",value:1,icon:p.j.prototype.getIcon("icLabel"),label:"Activo",class:{icon:"text-green"}},{type:"link",id:"Inactivo",value:0,icon:p.j.prototype.getIcon("icLabel"),label:"Inactivo",class:{icon:"text-gray"}}],X={icProduct:p.j.prototype.getIcon("icProduct"),searchOptions:j,menuItems:G,tableColumns:[{label:"",cssLabel:["font-bold","text-sm"],property:"image",cssProperty:["font-semibold","text-sm","text-left"],type:"image",sticky:!0,sort:!0,sortProperty:"image",visible:!0,download:!0},{label:"C\xd3DIGO",cssLabel:["font-bold","text-sm"],property:"code",cssProperty:["font-semibold","text-sm","text-left"],type:"textUppercase",sticky:!0,sort:!0,sortProperty:"code",visible:!0,download:!0},{label:"NOMBRE",cssLabel:["font-bold","text-sm"],property:"name",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"name",visible:!0,download:!0},{label:"CATEGOR\xcdA",cssLabel:["font-bold","text-sm"],property:"category",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"category",visible:!0,download:!0},{label:"STOCK MIN",cssLabel:["font-bold","text-sm"],property:"stockMin",cssProperty:["font-semibold","text-sm","text-left"],type:"number",sticky:!1,sort:!0,sortProperty:"stockMin",visible:!0,download:!0},{label:"STOCK MAX",cssLabel:["font-bold","text-sm"],property:"stockMax",cssProperty:["font-semibold","text-sm","text-left"],type:"number",sticky:!1,sort:!0,sortProperty:"stockMax",visible:!0,download:!0},{label:"PRECIO DE VENTA",cssLabel:["font-bold","text-sm"],property:"unitSalePrice",cssProperty:["font-semibold","text-sm","text-center"],type:"currency",sticky:!1,sort:!0,sortProperty:"unitSalePrice",visible:!0,download:!0},{label:"F. DE CREACI\xd3N",cssLabel:["font-bold","text-sm"],property:"auditCreateDate",cssProperty:["font-semibold","text-sm","text-left"],type:"datetime",sticky:!1,sort:!0,visible:!0,download:!0},{label:"ESTADO",cssLabel:["font-bold","text-sm"],property:"stateProduct",cssProperty:["font-semibold","text-sm","text-left"],type:"badge",sticky:!1,sort:!1,visible:!0,download:!0},{label:"",cssLabel:[],property:"icView",cssProperty:[],type:"icon",action:"view",sticky:!1,sort:!1,visible:!0,download:!1},{label:"",cssLabel:[],property:"icEdit",cssProperty:[],type:"icon",action:"edit",sticky:!1,sort:!1,visible:!0,download:!1},{label:"",cssLabel:[],property:"icDelete",cssProperty:[],type:"icon",action:"remove",sticky:!1,sort:!1,visible:!0,download:!1}],initialSort:"Id",initialSortDir:"desc",filters:{numFilter:0,textFilter:"",stateFilter:null,startDate:"",endDate:"",refresh:!1},resetFilters:{numFilter:0,textFilter:"",stateFilter:null,startDate:"",endDate:"",refresh:!1},getInputs:"",filename:"listado-de-productos"};var l=a(93075),K=a(64033),t=a(5e3),w=a(40704),d=a(62376),h=a(24850),f=a(92340),y=a(18905),D=a(40520);let C=(()=>{class n{constructor(e,o){this._http=e,this._alert=o}GetAll(e,o,i,s,g){return this._http.get(`${f.N.api}${d.F.LIST_PRODUCTS}?records=${e}&sort=${o}&order=${i}&numPage=${s+1}${g}`).pipe((0,h.U)(Mt=>this.transformProductData(Mt)))}transformProductData(e){const o={0:"text-gray bg-gray-light",1:"text-green bg-green-light"};return e.data.forEach(i=>{i.badgeColor=o[i.state]||"text-gray bg-gray-light",i.icView=(0,y.q7)("icVisibility","Ver stock actual",!0),i.icEdit=(0,y.q7)("icEdit","Editar Producto",!0),i.icDelete=(0,y.q7)("icDelete","Eliminar Producto",!0)}),e}productById(e){return this._http.get(`${f.N.api}${d.F.PRODUCT_BY_ID}${e}`).pipe((0,h.U)(i=>i.data))}productRegister(e){const o=`${f.N.api}${d.F.PRODUCT_REGISTER}`,i=this._builFormDataProduct(e);return this._http.post(o,i)}productEdit(e,o){const i=`${f.N.api}${d.F.PRODUCT_EDIT}${e}`,s=this._builFormDataProduct(o);return this._http.put(i,s)}productRemove(e){return this._http.put(`${f.N.api}${d.F.PRODUCT_REMOVE}${e}`,"").pipe((0,h.U)(i=>{i.isSuccess&&this._alert.success("Excelente",i.message)}))}productStockByWarehouse(e){return this._http.get(`${f.N.api}${d.F.PRODUCT_STOCK_WAREHOUSE}${e}`).pipe((0,h.U)(i=>i.data))}_builFormDataProduct(e){const o=new FormData;return o.append("code",e.code),o.append("name",e.name),o.append("stockMin",e.stockMin.toString()),o.append("stockMax",e.stockMax.toString()),o.append("categoryId",e.categoryId.toString()),o.append("state",e.state.toString()),o.append("image",e.image),o.append("unitSalePrice",e.unitSalePrice.toString()),o}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(D.eN),t.LFG(w.c))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tt=(()=>{class n{constructor(e){this._http=e}listSelectCategories(){return this._http.get(`${f.N.api}${d.F.LIST_SELECT_CATEGORIES}`).pipe((0,h.U)(o=>o.data))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(D.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=a(25245),_=a(47423),v=a(67322),U=a(77531),et=a(74107),ot=a(90508),b=a(48259),L=a(12232),S=a(72628);function nt(n,r){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"img",7),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.imgBase64,t.LSH)}}function rt(n,r){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"img",7),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("src",e.urlCurrentImg,t.LSH)}}let F=(()=>{class n{constructor(){this.selectedImage=new t.vpe,this.icUpload=p.j.prototype.getIcon("icUpload")}ngOnInit(){}selectedImg(e){if(e.target instanceof HTMLInputElement){const o=e.target;if(o.files&&o.files.length>0){const i=o.files[0];(0,y.s3)(i).then(s=>this.imgBase64=s),this.selectedImage.emit(i),this.urlCurrentImg=null}}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-img-selector"]],inputs:{urlCurrentImg:"urlCurrentImg"},outputs:{selectedImage:"selectedImage"},standalone:!0,features:[t.jDz],decls:10,vars:3,consts:[[1,"flex","justify-between"],[1,"mb-4","mt-10"],["type","button","mat-button","",1,"text-am-purple","text-sm","h-10","font-medium","w-full","rounded-xl",3,"click"],[3,"icIcon"],["type","file","hidden","",3,"change"],["imgSelector",""],[4,"ngIf"],[1,"w-42","h-32","border","border-dashed","border-am-main-blue-light","rounded","flex","flex-col","justify-between",3,"src"]],template:function(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){t.CHM(i);const g=t.MAs(6);return t.KtG(g.click())}),t._uU(3," Subir imagen "),t._UZ(4,"mat-icon",3),t.qZA(),t.TgZ(5,"input",4,5),t.NdJ("change",function(g){return o.selectedImg(g)}),t.qZA()(),t.TgZ(7,"div"),t.YNc(8,nt,2,1,"div",6),t.YNc(9,rt,2,1,"div",6),t.qZA()()}2&e&&(t.xp6(4),t.Q6J("icIcon",o.icUpload),t.xp6(4),t.Q6J("ngIf",o.imgBase64),t.xp6(1),t.Q6J("ngIf",o.urlCurrentImg&&!o.imgBase64))},dependencies:[u.ez,u.O5,S.m,x.Hw,_.lW,b.ar]}),n})();function it(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo C\xf3digo es requerido. "),t.qZA())}function at(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo Nombre es requerido. "),t.qZA())}function st(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo Stock M\xednimo es requerido. "),t.qZA())}function lt(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo Stock M\xe1ximo es requerido. "),t.qZA())}function ct(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo Precio de Venta es requerido. "),t.qZA())}function ut(n,r){if(1&n&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.label," ")}}function mt(n,r){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Campo Estado es requerido. "),t.qZA())}let k=(()=>{class n{constructor(e,o,i,s,g,T){this.data=e,this._fb=o,this._alert=i,this._productService=s,this._dialogRef=g,this._categorySelectService=T,this.icClose=p.j.prototype.getIcon("icClose"),this.configs=K.statesSelect,this.mode="",this.mode=e.mode,this.initForm()}initForm(){this.form=this._fb.group({productId:[0,[l.kI.required]],code:["",[l.kI.required]],name:["",[l.kI.required]],stockMin:[0,[l.kI.required]],stockMax:[0,[l.kI.required]],image:[""],unitSalePrice:[0,[l.kI.required]],categoryId:["",[l.kI.required]],state:["",[l.kI.required]]})}ngOnInit(){this.listSelectCategories(),"edit"==this.data.mode&&this.productById(this.data.dialogConfig.data.productId)}listSelectCategories(){this._categorySelectService.listSelectCategories().subscribe(e=>{this.categorySelect=e})}productById(e){this._productService.productById(e).subscribe(o=>{this.form.reset({productId:o.productId,code:o.code,name:o.name,stockMin:o.stockMin,stockMax:o.stockMax,image:o.image,unitSalePrice:o.unitSalePrice,categoryId:o.categoryId,state:o.state})})}selectedImage(e){this.form.get("image").setValue(e)}productSave(){if(this.form.invalid)return Object.values(this.form.controls).forEach(o=>{o.markAllAsTouched()});const e=this.form.get("productId").value;e>0?this.productEdit(e):this.productRegister()}productRegister(){this._productService.productRegister(this.form.value).subscribe(e=>{e.isSuccess?(this._alert.success("Excelente",e.message),this._dialogRef.close(!0)):this._alert.warn("Atenci\xf3n",e.message)})}productEdit(e){this._productService.productEdit(e,this.form.value).subscribe(o=>{o.isSuccess?(this._alert.success("Excelente",o.message),this._dialogRef.close(!0)):this._alert.warn("Atenci\xf3n",o.message)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.WI),t.Y36(l.qu),t.Y36(w.c),t.Y36(C),t.Y36(c.so),t.Y36(tt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["vex-product-manage"]],decls:48,vars:15,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title","",1,"flex","justify-between"],[1,"headline","m-0","text-xl","text-accent"],["mat-dialog-close","","mat-icon-button","",1,"text-secondary"],[3,"icIcon"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],["appearance","outline",1,"w-full"],["matInput","","formControlName","code"],[4,"ngIf"],["matInput","","formControlName","name"],["label","Categor\xedas",3,"control","required","listOptions"],["matInput","","type","number","formControlName","stockMin"],["matInput","","type","number","formControlName","stockMax"],["appearance","outline",1,"w-full","md:w-6/12"],["matInput","","type","number","formControlName","unitSalePrice"],["formControlName","state"],[3,"value",4,"ngFor","ngForOf"],[3,"urlCurrentImg","selectedImage"],["align","end"],["mat-button","","mat-dialog-close",""],["type","submit","mat-button","",1,"bg-accent","text-accent-contrast",3,"disabled"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.productSave()}),t.TgZ(1,"div",1)(2,"h2",2)(3,"strong"),t._uU(4),t.qZA()(),t.TgZ(5,"button",3),t._UZ(6,"mat-icon",4),t.qZA()(),t.TgZ(7,"mat-dialog-content")(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),t._uU(11,"C\xf3digo"),t.qZA(),t._UZ(12,"input",7),t.YNc(13,it,2,0,"mat-error",8),t.qZA(),t.TgZ(14,"mat-form-field",6)(15,"mat-label"),t._uU(16,"Nombre"),t.qZA(),t._UZ(17,"input",9),t.YNc(18,at,2,0,"mat-error",8),t.qZA()(),t._UZ(19,"app-select-autocomplete",10),t.TgZ(20,"div",5)(21,"mat-form-field",6)(22,"mat-label"),t._uU(23,"Stock M\xednimo"),t.qZA(),t._UZ(24,"input",11),t.YNc(25,st,2,0,"mat-error",8),t.qZA(),t.TgZ(26,"mat-form-field",6)(27,"mat-label"),t._uU(28,"Stock M\xe1ximo"),t.qZA(),t._UZ(29,"input",12),t.YNc(30,lt,2,0,"mat-error",8),t.qZA()(),t.TgZ(31,"mat-form-field",13)(32,"mat-label"),t._uU(33,"Precio de Venta"),t.qZA(),t._UZ(34,"input",14),t.YNc(35,ct,2,0,"mat-error",8),t.qZA(),t.TgZ(36,"mat-form-field",6)(37,"mat-label"),t._uU(38,"Estado"),t.qZA(),t.TgZ(39,"mat-select",15),t.YNc(40,ut,2,2,"mat-option",16),t.qZA(),t.YNc(41,mt,2,0,"mat-error",8),t.qZA(),t.TgZ(42,"app-img-selector",17),t.NdJ("selectedImage",function(s){return o.selectedImage(s)}),t.qZA()(),t.TgZ(43,"mat-dialog-actions",18)(44,"button",19),t._uU(45,"CANCELAR"),t.qZA(),t.TgZ(46,"button",20),t._uU(47," GUARDAR "),t.qZA()()()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(4),t.Oqu("register"==o.data.mode?"Registrar Nuevo Producto":"Actualizar Producto"),t.xp6(2),t.Q6J("icIcon",o.icClose),t.xp6(7),t.Q6J("ngIf",o.form.get("code").hasError("required")),t.xp6(5),t.Q6J("ngIf",o.form.get("name").hasError("required")),t.xp6(1),t.Q6J("control",o.form.get("categoryId"))("required",!0)("listOptions",o.categorySelect),t.xp6(6),t.Q6J("ngIf",o.form.get("stockMin").hasError("required")),t.xp6(5),t.Q6J("ngIf",o.form.get("stockMax").hasError("required")),t.xp6(5),t.Q6J("ngIf",o.form.get("unitSalePrice").hasError("required")),t.xp6(5),t.Q6J("ngForOf",o.configs),t.xp6(1),t.Q6J("ngIf",o.form.get("state").hasError("required")),t.xp6(1),t.Q6J("urlCurrentImg",o.form.get("image").value),t.xp6(4),t.Q6J("disabled",o.form.invalid))},dependencies:[u.sg,u.O5,c.ZT,c.uh,c.xY,c.H8,x.Hw,_.lW,v.TO,v.KE,v.hX,U.Nt,et.gD,ot.ey,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.sg,l.u,b.ar,L.z,F]}),n})();var pt=a(35226),dt=a.n(pt);const ft={tableColumns:[{label:"ALMAC\xc9N",cssLabel:["font-bold","text-sm","text-left","text-am-main-blue-dark bg-am-main-blue-light rounded-l-lg"],property:"warehouse",cssProperty:["font-medium","w-24"],type:"text",visible:!0},{label:"STOCK ACTUAL",cssLabel:["font-bold","text-sm","text-center","text-am-main-blue-dark bg-am-main-blue-light"],property:"currentStock",cssProperty:["font-medium","w-24","text-center"],type:"number",visible:!0},{label:"PRECIO DE COMPRA",cssLabel:["font-bold","text-sm","text-center","text-am-main-blue-dark bg-am-main-blue-light rounded-r-lg"],property:"purchasePrice",cssProperty:["font-medium","w-24","text-center"],type:"currency",visible:!0}]};var I=a(86087),m=a(16346),gt=a(1277),ht=a(33848),bt=a(68911),yt=a(23322);function vt(n,r){if(1&n&&(t.TgZ(0,"th",18)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.Q6J("ngClass",e.cssLabel),t.xp6(2),t.Oqu(e.label)}}function Ct(n,r){if(1&n&&(t.TgZ(0,"td",19)(1,"div")(2,"p",20),t._uU(3),t.ALo(4,"titlecase"),t.qZA()()()),2&n){const e=r.$implicit,o=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngClass",o.cssProperty),t.xp6(1),t.hij(" ",t.lcZ(4,2,e[o.property].toString())," ")}}function xt(n,r){if(1&n&&(t.ynx(0,15),t.YNc(1,vt,3,2,"th",16),t.YNc(2,Ct,5,4,"td",17),t.BQk()),2&n){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function _t(n,r){if(1&n&&(t.TgZ(0,"th",18)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.Q6J("ngClass",e.cssLabel),t.xp6(2),t.Oqu(e.label)}}function St(n,r){if(1&n&&(t.TgZ(0,"td",19)(1,"div")(2,"p",20),t._uU(3),t.qZA()()()),2&n){const e=r.$implicit,o=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngClass",o.cssProperty),t.xp6(1),t.hij(" ",e[o.property]," ")}}function It(n,r){if(1&n&&(t.ynx(0,15),t.YNc(1,_t,3,2,"th",16),t.YNc(2,St,4,2,"td",17),t.BQk()),2&n){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function Tt(n,r){if(1&n&&(t.TgZ(0,"th",18)(1,"div"),t._uU(2),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.Q6J("ngClass",e.cssLabel),t.xp6(2),t.Oqu(e.label)}}function Zt(n,r){if(1&n&&(t.TgZ(0,"td",19)(1,"div")(2,"p",20),t._uU(3),t.ALo(4,"currency"),t.qZA()()()),2&n){const e=r.$implicit,o=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngClass",o.cssProperty),t.xp6(1),t.hij(" ",t.Dn7(4,2,e[o.property],"","")," ")}}function Pt(n,r){if(1&n&&(t.ynx(0,15),t.YNc(1,Tt,3,2,"th",16),t.YNc(2,Zt,5,6,"td",17),t.BQk()),2&n){const e=t.oxw().$implicit;t.Q6J("matColumnDef",e.property)}}function At(n,r){if(1&n&&(t.ynx(0),t.YNc(1,xt,3,1,"ng-container",14),t.YNc(2,It,3,1,"ng-container",14),t.YNc(3,Pt,3,1,"ng-container",14),t.BQk()),2&n){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf","text"===e.type),t.xp6(1),t.Q6J("ngIf","number"===e.type),t.xp6(1),t.Q6J("ngIf","currency"===e.type)}}function wt(n,r){1&n&&t._UZ(0,"tr",21)}function Dt(n,r){1&n&&t._UZ(0,"tr",22),2&n&&t.Q6J("@fadeInUp",void 0)}function Ut(n,r){1&n&&(t.TgZ(0,"div",23),t._UZ(1,"img",24),t.TgZ(2,"h2",25),t._uU(3,"No hay resultados en esta b\xfasqueda"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("@scaleFadeIn",void 0))}let N=(()=>{class n{constructor(){this.rowClick=new t.vpe,this.paginatorOptions={pageSizeOptions:[5,10,20],pageSize:[5],pageLength:0},this.icSearch=p.j.prototype.getIcon("icSearch")}ngOnInit(){this.data&&(this.visibleColumns=this.columns.filter(e=>e.visible).map(e=>e.property),this.dataSource=new m.by(this.data))}ngAfterViewInit(){this.dataSource.paginator=this.paginator}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-table-simple"]],viewQuery:function(e,o){if(1&e&&t.Gf(I.NW,5),2&e){let i;t.iGM(i=t.CRH())&&(o.paginator=i.first)}},inputs:{columns:"columns",data:"data"},outputs:{rowClick:"rowClick"},standalone:!0,features:[t._Bn([{provide:I.ye,useValue:(0,gt.V)()},{provide:v.o2,useValue:{appearance:"standard"}}]),t.jDz],decls:15,vars:16,consts:[[1,"h-full","flex","flex-col","relative","gap-4"],[1,"flex","justify-end"],[1,"flex","items-center","bg-white","border","border-am-main-blue-light","rounded-xl","overflow-hidden","w-72"],[1,"bg-white","rounded-sm","text-am-purple-dark","p-2"],["size","24px",1,"flex-none",3,"icIcon"],["matInput","","placeholder","Buscar ...","maxlength","20",1,"border-0","h-11","outline-none","rtl:pr-4","placeholder:text-secondary","bg-card","flex-auto",3,"keyup"],["input",""],["mat-table","",1,"w-full",3,"dataSource"],[4,"ngFor","ngForOf"],["mat-header-row","","class","h-12",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","h-12",4,"matRowDef","matRowDefColumns"],["class","hide-table flex h-full flex-col justify-center items-center",4,"ngIf"],[1,"h-24","flex","gap-4","justify-between","items-center","flex-grap","mx-10","my-2"],[3,"pageSizeOptions","pageSize","length","showFirstLastButtons"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell","",3,"ngClass",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","",3,"ngClass"],["mat-cell",""],[3,"ngClass"],["mat-header-row","",1,"h-12"],["mat-row","",1,"h-12"],[1,"hide-table","flex","h-full","flex-col","justify-center","items-center"],["src","assets/img/illustrations/idea.svg",1,"m-12","h-64"],[1,"headline","m-0","text-center"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t._UZ(4,"ic-icon",4),t.qZA(),t.TgZ(5,"input",5,6),t.NdJ("keyup",function(s){return o.applyFilter(s)}),t.qZA()()(),t.TgZ(7,"div")(8,"table",7),t.YNc(9,At,4,3,"ng-container",8),t.YNc(10,wt,1,0,"tr",9),t.YNc(11,Dt,1,1,"tr",10),t.qZA(),t.YNc(12,Ut,4,1,"div",11),t.qZA(),t.TgZ(13,"div",12),t._UZ(14,"mat-paginator",13),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("icIcon",o.icSearch),t.xp6(3),t.ekj("overflow-auto",o.dataSource.filteredData.length),t.xp6(1),t.Q6J("@scaleFadeIn",o.dataSource.filteredData)("dataSource",o.dataSource),t.xp6(1),t.Q6J("ngForOf",o.columns),t.xp6(1),t.Q6J("matHeaderRowDef",o.visibleColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.visibleColumns),t.xp6(1),t.Q6J("ngIf",0===o.dataSource.filteredData.length),t.xp6(2),t.ekj("hidden",!o.dataSource.filteredData.length),t.Q6J("pageSizeOptions",o.paginatorOptions.pageSizeOptions)("pageSize",o.paginatorOptions.pageSize)("length",o.paginatorOptions.pageLength)("showFirstLastButtons",!0))},dependencies:[S.m,u.mk,u.sg,u.O5,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,I.NW,U.Nt,b.ar,yt.oO,u.rS,u.H9],data:{animation:[bt.f,ht.$]}}),n})();function Lt(n,r){if(1&n&&t._UZ(0,"app-list-table-simple",6),2&n){const e=t.oxw();t.Q6J("columns",e.component.tableColumns)("data",e.productStockByWarehouses)}}let Ft=(()=>{class n{constructor(e,o){this.data=e,this._productService=o,this.icClose=p.j.prototype.getIcon("icClose"),this.codeProduct=this.data.dialogConfig.data.code,this.nameProduct=this.data.dialogConfig.data.name}ngOnInit(){this.component=Object.assign({},ft),this.productStockByWarehouse(this.data.dialogConfig.data.productId)}productStockByWarehouse(e){this._productService.productStockByWarehouse(e).subscribe(o=>{this.productStockByWarehouses=o})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.WI),t.Y36(C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["vex-product-stock-warehouse"]],decls:10,vars:4,consts:[["mat-dialog-title","",1,"flex","justify-between"],[1,"headline","m-0","text-xl","text-accent"],["mat-dialog-close","","mat-icon-button","",1,"text-secondary"],[3,"icIcon"],[1,"text-primary"],[3,"columns","data",4,"ngIf"],[3,"columns","data"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h2",1)(2,"strong"),t._uU(3,"Stock Actual del Producto por Almac\xe9n"),t.qZA()(),t.TgZ(4,"button",2),t._UZ(5,"mat-icon",3),t.qZA()(),t.TgZ(6,"strong",4),t._uU(7),t.qZA(),t.TgZ(8,"mat-dialog-content"),t.YNc(9,Lt,1,2,"app-list-table-simple",5),t.qZA()),2&e&&(t.xp6(5),t.Q6J("icIcon",o.icClose),t.xp6(2),t.AsE("",o.codeProduct," - ",o.nameProduct,""),t.xp6(2),t.Q6J("ngIf",o.productStockByWarehouses))},dependencies:[u.O5,c.ZT,c.uh,c.xY,x.Hw,_.lW,b.ar,N]}),n})();var kt=a(31421),J=a(2638),E=a(26724),M=a(3343),O=a(57638),Q=a(41248),R=a(24161),q=a(93495);const Nt=[{path:"",component:(()=>{class n{constructor(e,o,i){this._productService=o,this._dialog=i,e.set("Productos")}ngOnInit(){this.component=X}setMenu(e){this.component.filters.stateFilter=e,this.formatGetInputs()}search(e){this.component.filters.numFilter=e.searchValue,this.component.filters.textFilter=e.searchData,this.formatGetInputs()}searchDateRange(e){this.component.filters.startDate=e.startDate,this.component.filters.endDate=e.endDate,this.formatGetInputs()}resetFilters(){this.component.filters=Object.assign({},this.component.resetFilters),this.formatGetInputs()}formatGetInputs(){let e="";null!=this.component.filters.textFilter&&(e+=`&numFilter=${this.component.filters.numFilter}&textFilter=${this.component.filters.textFilter}`),null!=this.component.filters.stateFilter&&(e+=`&stateFilter=${this.component.filters.stateFilter}`),""!=this.component.filters.startDate&&""!=this.component.filters.endDate&&(e+=`&startDate=${this.component.filters.startDate}`,e+=`&endDate=${this.component.filters.endDate}`),this.component.filters.refresh&&(e+=`&refresh=${Math.random()}`,this.component.filters.refresh=!1),this.component.getInputs=e}openDialogRegister(){this._dialog.open(k,{disableClose:!0,width:"400px",data:{mode:"register"}}).afterClosed().subscribe(e=>{e&&this.setGetInputsProducts(!0)})}rowClick(e){let i=e.row;switch(e.action){case"edit":this.productEdit(i);break;case"remove":this.productRemove(i);break;case"view":this.productInfoWarehouse(i)}return!1}productEdit(e){const o=new c.vA;o.data=e,this._dialog.open(k,{data:{dialogConfig:o,mode:"edit"},disableClose:!0,width:"400px"}).afterClosed().subscribe(i=>{i&&this.setGetInputsProducts(!0)})}productRemove(e){dt().fire({title:`\xbfRealmente deseas eliminar el producto ${e.name}?`,text:"Se borrar\xe1 de forma permanente!",icon:"warning",showCancelButton:!0,focusCancel:!0,confirmButtonColor:"rgb(210, 155, 253)",cancelButtonColor:"rgb(79, 109, 253)",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar",width:430}).then(o=>{o.isConfirmed&&this._productService.productRemove(e.productId).subscribe(()=>this.setGetInputsProducts(!0))})}productInfoWarehouse(e){const o=new c.vA;o.data=e,this._dialog.open(Ft,{data:{dialogConfig:o}})}setGetInputsProducts(e){this.component.filters.refresh=e,this.formatGetInputs()}get getDownloadUrl(){return"Product?Download=True"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(kt.O),t.Y36(C),t.Y36(c.uw))},n.\u0275cmp=t.Xpm({type:n,selectors:[["vex-product-list"]],decls:21,vars:18,consts:[[1,"w-full","h-full","flex","flex-col"],[1,"px-gutter","pt-1","pb-20","bg-primary","flex-none"],[1,"flex","items-center","justify-between"],[1,"headline","text-primary-contrast","m-0","flex","items-center","w-full","max-w-xxxl","mr-6"],[1,"hidden","sm:block",3,"icon"],[1,"ml-4","block"],[1,"flex","items-center","justify-end","w-full","mt-5"],[1,"flex","justify-between"],[3,"start","end","rangeDate"],[3,"buttonClick"],[1,"flex","justify-between","ml-6"],[3,"searchOptions","currentValue","search"],[3,"url","getInputs","filename"],[1,"-mt-14","pt-0","overflow-hidden","flex"],[1,"bg-transparent","flex-auto","flex"],[1,"p-gutter","pt-0","flex-auto","flex","items-start"],["buttonLabel","AGREGAR",1,"hidden","sm:block","mr-6",3,"currentMenu","items","buttonShow","filterChange","buttonClick"],[1,"card","h-full","overflow-hidden","flex-auto"],[3,"service","columns","sortBy","sortDir","getInputs","rowClick"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._UZ(4,"ic-icon",4),t.TgZ(5,"span",5),t._uU(6,"Gesti\xf3n de Productos"),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7)(9,"app-filter-date-range-ymd",8),t.NdJ("rangeDate",function(s){return o.searchDateRange(s)}),t.qZA(),t.TgZ(10,"app-button-reset-filters",9),t.NdJ("buttonClick",function(){return o.resetFilters()}),t.qZA()(),t.TgZ(11,"div",10)(12,"app-search-box-multiple",11),t.NdJ("search",function(s){return o.search(s)}),t.qZA()(),t.TgZ(13,"div"),t._UZ(14,"app-export-excel",12),t.qZA()()()(),t.TgZ(15,"div",13)(16,"mat-drawer-container",14)(17,"mat-drawer-content",15)(18,"app-menu",16),t.NdJ("filterChange",function(s){return o.setMenu(s)})("buttonClick",function(){return o.openDialogRegister()}),t.qZA(),t.TgZ(19,"div",17)(20,"app-list-table",18),t.NdJ("rowClick",function(s){return o.rowClick(s)}),t.qZA()()()()()()),2&e&&(t.xp6(4),t.Q6J("@scaleIn",void 0)("icon",o.component.icProduct),t.xp6(1),t.Q6J("@fadeInRight",void 0),t.xp6(4),t.Q6J("start",o.component.filters.startDate)("end",o.component.filters.endDate),t.xp6(3),t.Q6J("searchOptions",o.component.searchOptions)("currentValue",o.component.filters.textFilter),t.xp6(2),t.Q6J("url",o.getDownloadUrl)("getInputs",o.component.getInputs)("filename",o.component.filename),t.xp6(4),t.Q6J("currentMenu",o.component.getInputs.stateFilter)("items",o.component.menuItems)("buttonShow",!0),t.xp6(2),t.Q6J("service",o._productService)("columns",o.component.tableColumns)("sortBy",o.component.initialSort)("sortDir",o.component.initialSortDir)("getInputs",o.component.getInputs))},dependencies:[J.kh,J.LW,b.ar,E.z,M.J,O.M,Q.$,R.X,q.I],data:{animation:[B.KF,Y.a,$.G]}}),n})(),data:{scrollDisabled:!0,toolbarShadowEnabled:!0}}];let Jt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[P.Bz.forChild(Nt),P.Bz]}),n})(),Et=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[u.ez,Jt,S.m,E.z,M.J,O.M,Q.$,R.X,q.I,L.z,F,N]}),n})()}}]);