"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[416],{45416:(ie,v,n)=>{n.r(v),n.d(v,{WarehouseModule:()=>ne});var d=n(69808),b=n(93495),y=n(41248),C=n(24161),I=n(26724),x=n(57638),A=n(3343),S=n(72628),W=n(68555),R=n(16496),U=n(49597),N=n(48535),u=n(82349),m=n(11612);const J=[{label:"Nombre",value:1,placeholder:"Buscar por Nombre",validation:[n(28222).R.defaultName],validation_desc:"S\xf3lo se permite letras en esta b\xfasqueda.",icon:"icName"}],L=[{type:"link",id:"all",icon:m.j.prototype.getIcon("icViewHeadline"),label:"Todos"},{type:"link",id:"Activo",value:1,icon:m.j.prototype.getIcon("icLabel"),label:"Activo",class:{icon:"text-green"}},{type:"link",id:"Inactivo",value:0,icon:m.j.prototype.getIcon("icLabel"),label:"Inactivo",class:{icon:"text-gray"}}],j={icWarehouse:m.j.prototype.getIcon("icWarehouse"),searchOptions:J,menuItems:L,tableColumns:[{label:"NOMBRE",cssLabel:["font-bold","text-sm"],property:"name",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!0,sort:!0,sortProperty:"name",visible:!0,download:!0},{label:"F. DE CREACI\xd3N",cssLabel:["font-bold","text-sm"],property:"auditCreateDate",cssProperty:["font-semibold","text-sm","text-left"],type:"datetime",sticky:!1,sort:!0,visible:!0,download:!0},{label:"ESTADO",cssLabel:["font-bold","text-sm"],property:"stateWarehouse",cssProperty:["font-semibold","text-sm","text-left"],type:"badge",sticky:!1,sort:!1,visible:!0,download:!0},{label:"",cssLabel:[],property:"icEdit",cssProperty:[],type:"icon",action:"edit",sticky:!1,sort:!1,visible:!0,download:!1},{label:"",cssLabel:[],property:"icDelete",cssProperty:[],type:"icon",action:"remove",sticky:!1,sort:!1,visible:!0,download:!1}],initialSort:"Id",initialSortDir:"desc",filters:{numFilter:0,textFilter:"",stateFilter:null,startDate:"",endDate:"",refresh:!1},resetFilters:{numFilter:0,textFilter:"",stateFilter:null,startDate:"",endDate:"",refresh:!1},getInputs:"",filename:"listado-de-almacenes"};var l=n(93075),Y=n(64033),e=n(5e3),w=n(40704),c=n(62376),E=n(18905),p=n(24850),h=n(92340),Q=n(40520);let F=(()=>{class s{constructor(t,o){this._http=t,this._alert=o}GetAll(t,o,r,i,g){return this._http.get(`${h.N.api}${c.F.LIST_WAREHOUSES}?records=${t}&sort=${o}&order=${r}&numPage=${i+1}${g}`).pipe((0,p.U)(ae=>this.transformWarehouseData(ae)))}transformWarehouseData(t){const o={0:"text-gray bg-gray-light",1:"text-green bg-green-light"};return t.data.forEach(r=>{r.badgeColor=o[r.state]||"text-gray bg-gray-light",r.icEdit=(0,E.q7)("icEdit","Editar Almacen",!0),r.icDelete=(0,E.q7)("icDelete","Eliminar Almac\xe9n",!0)}),t}warehouseById(t){return this._http.get(`${h.N.api}${c.F.WAREHOUSE_BY_ID}${t}`).pipe((0,p.U)(r=>r.data))}warehouseRegister(t){return this._http.post(`${h.N.api}${c.F.WAREHOUSE_REGISTER}`,t)}warehouseEdit(t,o){return this._http.put(`${h.N.api}${c.F.WAREHOUSE_EDIT}${t}`,o)}warehouseRemove(t){return this._http.put(`${h.N.api}${c.F.WAREHOUSE_REMOVE}${t}`,"").pipe((0,p.U)(r=>{r.isSuccess&&this._alert.success("Excelente",r.message)}))}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(Q.eN),e.LFG(w.c))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var H=n(25245),z=n(47423),f=n(67322),P=n(77531),V=n(74107),X=n(90508),D=n(48259);function K(s,a){1&s&&(e.TgZ(0,"mat-error"),e._uU(1," Campo Nombre es requerido. "),e.qZA())}function q(s,a){if(1&s&&(e.TgZ(0,"mat-option",13),e._uU(1),e.qZA()),2&s){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function k(s,a){1&s&&(e.TgZ(0,"mat-error"),e._uU(1," Campo Estado es requerido. "),e.qZA())}let Z=(()=>{class s{constructor(t,o,r,i,g){this.data=t,this._fb=o,this._alert=r,this._warehouseService=i,this._dialogRef=g,this.icClose=m.j.prototype.getIcon("icClose"),this.configs=Y.statesSelect,this.initForm()}initForm(){this.form=this._fb.group({warehouseId:[0,[l.kI.required]],name:["",[l.kI.required]],state:["",[l.kI.required]]})}ngOnInit(){"edit"==this.data.mode&&this.warehouseById(this.data.dialogConfif.data.warehouseId)}warehouseById(t){this._warehouseService.warehouseById(t).subscribe(o=>{this.form.reset({warehouseId:o.warehouseId,name:o.name,state:o.state})})}warehouseSave(){if(this.form.invalid)return Object.values(this.form.controls).forEach(o=>{o.markAllAsTouched()});const t=this.form.get("warehouseId").value;t>0?this.warehouseEdit(t):this.warehouseRegister()}warehouseRegister(){this._warehouseService.warehouseRegister(this.form.value).subscribe(t=>{t.isSuccess?(this._alert.success("Excelente",t.message),this._dialogRef.close(!0)):this._alert.warn("Atenci\xf3n",t.message)})}warehouseEdit(t){this._warehouseService.warehouseEdit(t,this.form.value).subscribe(o=>{o.isSuccess?(this._alert.success("Excelente",o.message),this._dialogRef.close(!0)):this._alert.warn("Atenci\xf3n",o.message)})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(u.WI),e.Y36(l.qu),e.Y36(w.c),e.Y36(F),e.Y36(u.so))},s.\u0275cmp=e.Xpm({type:s,selectors:[["vex-warehouse-manage"]],decls:24,vars:7,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title","",1,"flex","justify-between"],[1,"headline","m-0","text-xl","text-accent"],["mat-dialog-close","","mat-icon-button","",1,"text-secondary"],[3,"icIcon"],["appearance","outline",1,"w-full"],["matInput","","formControlName","name"],[4,"ngIf"],["formControlName","state"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close",""],["color","purple","mat-button","","type","submit",1,"bg-accent","text-accent-contrast",3,"disabled"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.warehouseSave()}),e.TgZ(1,"div",1)(2,"h2",2)(3,"strong"),e._uU(4),e.qZA()(),e.TgZ(5,"button",3),e._UZ(6,"mat-icon",4),e.qZA()(),e.TgZ(7,"mat-dialog-content")(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Nombre"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,K,2,0,"mat-error",7),e.qZA(),e.TgZ(13,"mat-form-field",5)(14,"mat-label"),e._uU(15,"Estado"),e.qZA(),e.TgZ(16,"mat-select",8),e.YNc(17,q,2,2,"mat-option",9),e.qZA(),e.YNc(18,k,2,0,"mat-error",7),e.qZA()(),e.TgZ(19,"mat-dialog-actions",10)(20,"button",11),e._uU(21,"CANCELAR"),e.qZA(),e.TgZ(22,"button",12),e._uU(23," GUARDAR "),e.qZA()()()),2&t&&(e.Q6J("formGroup",o.form),e.xp6(4),e.Oqu("register"==o.data.mode?"Registrar Nuevo Almac\xe9n":"Actualizar Almac\xe9n"),e.xp6(2),e.Q6J("icIcon",o.icClose),e.xp6(6),e.Q6J("ngIf",o.form.get("name").hasError("required")),e.xp6(5),e.Q6J("ngForOf",o.configs),e.xp6(1),e.Q6J("ngIf",o.form.get("state").hasError("required")),e.xp6(4),e.Q6J("disabled",o.form.invalid))},dependencies:[d.sg,d.O5,u.ZT,u.uh,u.xY,u.H8,H.Hw,z.lW,f.TO,f.KE,f.hX,P.Nt,V.gD,X.ey,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,D.ar]}),s})();var _=n(35226),ee=n.n(_),te=n(31421),T=n(2638);const oe=[{path:"",component:(()=>{class s{constructor(t,o,r){this._warehouseService=o,this._dialog=r,t.set("Almacenes")}ngOnInit(){this.component=j}setMenu(t){this.component.filters.stateFilter=t,this.formatGetInputs()}search(t){this.component.filters.numFilter=t.searchValue,this.component.filters.textFilter=t.searchData,this.formatGetInputs()}searchDateRange(t){this.component.filters.startDate=t.startDate,this.component.filters.endDate=t.endDate,this.formatGetInputs()}resetFilters(){this.component.filters=Object.assign({},this.component.resetFilters),this.formatGetInputs()}formatGetInputs(){let t="";null!=this.component.filters.textFilter&&(t+=`&numFilter=${this.component.filters.numFilter}&textFilter=${this.component.filters.textFilter}`),null!=this.component.filters.stateFilter&&(t+=`&stateFilter=${this.component.filters.stateFilter}`),""!=this.component.filters.startDate&&""!=this.component.filters.endDate&&(t+=`&startDate=${this.component.filters.startDate}`,t+=`&endDate=${this.component.filters.endDate}`),this.component.filters.refresh&&(t+=`&refresh=${Math.random()}`,this.component.filters.refresh=!1),this.component.getInputs=t}setGetInputsWarehouses(t){this.component.filters.refresh=t,this.formatGetInputs()}get getDownloadUrl(){return"Warehouse?Download=True"}rowClick(t){let r=t.row;switch(t.action){case"edit":this.warehouseEdit(r);break;case"remove":this.warehouseRemove(r)}return!1}openDialogRegister(){this._dialog.open(Z,{disableClose:!0,width:"400px",data:{mode:"register"}}).afterClosed().subscribe(t=>{t&&this.setGetInputsWarehouses(!0)})}warehouseEdit(t){const o=new u.vA;o.data=t,this._dialog.open(Z,{disableClose:!0,width:"400px",data:{dialogConfif:o,mode:"edit"}}).afterClosed().subscribe(r=>{r&&this.setGetInputsWarehouses(!0)})}warehouseRemove(t){ee().fire({title:`\xbfRealmente deseas eliminar el almac\xe9n ${t.name}?`,text:"Se borrar\xe1 de forma permanente!",icon:"warning",showCancelButton:!0,focusCancel:!0,confirmButtonColor:"rgb(210, 155, 253)",cancelButtonColor:"rgb(79, 109, 253)",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar",width:430}).then(o=>{o.isConfirmed&&this._warehouseService.warehouseRemove(t.warehouseId).subscribe(()=>this.setGetInputsWarehouses(!0))})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(te.O),e.Y36(F),e.Y36(u.uw))},s.\u0275cmp=e.Xpm({type:s,selectors:[["vex-warehouse-list"]],decls:21,vars:18,consts:[[1,"w-full","h-full","flex","flex-col"],[1,"px-gutter","pt-1","pb-20","bg-primary","flex-none"],[1,"flex","items-center","justify-between"],[1,"headline","text-primary-contrast","m-0","flex","items-center","w-full","max-w-xxxl","mr-6"],[1,"hidden","sm:block",3,"icon"],[1,"ml-4","block"],[1,"flex","items-center","justify-end","w-full","mt-5"],[1,"flex","justify-between"],[3,"start","end","rangeDate"],[3,"buttonClick"],[1,"flex","justify-between","ml-6"],[3,"searchOptions","currentValue","search"],[3,"url","getInputs","filename"],[1,"-mt-14","pt-0","overflow-hidden","flex"],[1,"bg-transparent","flex-auto","flex"],[1,"p-gutter","pt-0","flex-auto","flex","items-start"],["buttonLabel","AGREGAR",1,"hidden","sm:block","mr-6",3,"currentMenu","items","buttonShow","filterChange","buttonClick"],[1,"card","h-full","overflow-hidden","flex-auto"],[3,"service","columns","sortBy","sortDir","getInputs","rowClick"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._UZ(4,"ic-icon",4),e.TgZ(5,"span",5),e._uU(6,"Gesti\xf3n de Almacenes"),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"app-filter-date-range-ymd",8),e.NdJ("rangeDate",function(i){return o.searchDateRange(i)}),e.qZA(),e.TgZ(10,"app-button-reset-filters",9),e.NdJ("buttonClick",function(){return o.resetFilters()}),e.qZA()(),e.TgZ(11,"div",10)(12,"app-search-box-multiple",11),e.NdJ("search",function(i){return o.search(i)}),e.qZA()(),e.TgZ(13,"div"),e._UZ(14,"app-export-excel",12),e.qZA()()()(),e.TgZ(15,"div",13)(16,"mat-drawer-container",14)(17,"mat-drawer-content",15)(18,"app-menu",16),e.NdJ("filterChange",function(i){return o.setMenu(i)})("buttonClick",function(){return o.openDialogRegister()}),e.qZA(),e.TgZ(19,"div",17)(20,"app-list-table",18),e.NdJ("rowClick",function(i){return o.rowClick(i)}),e.qZA()()()()()()),2&t&&(e.xp6(4),e.Q6J("@scaleIn",void 0)("icon",o.component.icWarehouse),e.xp6(1),e.Q6J("@fadeInRight",void 0),e.xp6(4),e.Q6J("start",o.component.filters.startDate)("end",o.component.filters.endDate),e.xp6(3),e.Q6J("searchOptions",o.component.searchOptions)("currentValue",o.component.filters.textFilter),e.xp6(2),e.Q6J("url",o.getDownloadUrl)("getInputs",o.component.getInputs)("filename",o.component.filename),e.xp6(4),e.Q6J("currentMenu",o.component.getInputs.stateFilter)("items",o.component.menuItems)("buttonShow",!0),e.xp6(2),e.Q6J("service",o._warehouseService)("columns",o.component.tableColumns)("sortBy",o.component.initialSort)("sortDir",o.component.initialSortDir)("getInputs",o.component.getInputs))},dependencies:[T.kh,T.LW,D.ar,I.z,A.J,x.M,y.$,C.X,b.I],data:{animation:[N.KF,U.a,R.G]}}),s})(),data:{scrollDisabled:!0,toolbarShadowEnabled:!0}}];let se=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[W.Bz.forChild(oe),W.Bz]}),s})(),ne=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[d.ez,se,S.m,I.z,A.J,x.M,y.$,C.X,b.I]}),s})()}}]);