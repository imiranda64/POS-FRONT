"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[623],{75623:(dt,v,i)=>{i.r(v),i.d(v,{ClientModule:()=>ct});var b=i(68555),R=i(16496),J=i(49597),M=i(48535),m=i(82349),c=i(11612),p=i(28222);const $=[{label:"Nombre",value:1,placeholder:"Buscar por Nombre",validation:[p.R.defaultName],validation_desc:"S\xf3lo se permite letras en esta b\xfasqueda.",icon:"icName"},{label:"Email",value:2,placeholder:"Buscar por Email",validation:[p.R.emailValidation],validation_desc:"S\xf3lo se permite correos v\xe1lidos.",icon:"icMail"},{label:"N\xb0 Documento",value:3,placeholder:"Buscar por N\xb0 Documento",validation:[p.R.dni],validation_desc:"S\xf3lo se permite documentos v\xe1lidos.",icon:"icDescription"}],O=[{type:"link",id:"all",icon:c.j.prototype.getIcon("icViewHeadline"),label:"Todos"},{type:"link",id:"Activo",value:1,icon:c.j.prototype.getIcon("icLabel"),label:"Activo",class:{icon:"text-green"}},{type:"link",id:"Inactivo",value:0,icon:c.j.prototype.getIcon("icLabel"),label:"Inactivo",class:{icon:"text-gray"}}],Q={icClient:c.j.prototype.getIcon("icClient"),searchOptions:$,menuItems:O,tableColumns:[{label:"NOMBRE",cssLabel:["font-bold","text-sm"],property:"name",cssProperty:["font-semibold","text-sm","text-left"],type:"textUppercase",sticky:!0,sort:!0,sortProperty:"name",visible:!0,download:!0},{label:"EMAIL",cssLabel:["font-bold","text-sm"],property:"email",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"email",visible:!0,download:!0},{label:"TIPO DOCUMENTO",cssLabel:["font-bold","text-sm"],property:"documentType",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"documentType",visible:!0,download:!0},{label:"N\xb0 DOCUMENTO",cssLabel:["font-bold","text-sm"],property:"documentNumber",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"documentNumber",visible:!0,download:!0},{label:"DIRECCI\xd3N",cssLabel:["font-bold","text-sm"],property:"address",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"address",visible:!0,download:!0},{label:"TEL\xc9FONO",cssLabel:["font-bold","text-sm"],property:"phone",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"phone",visible:!0,download:!0},{label:"F. DE CREACI\xd3N",cssLabel:["font-bold","text-sm"],property:"auditCreateDate",cssProperty:["font-semibold","text-sm","text-left"],type:"datetime",sticky:!1,sort:!0,visible:!0,download:!0},{label:"ESTADO",cssLabel:["font-bold","text-sm"],property:"stateClient",cssProperty:["font-semibold","text-sm","text-left"],type:"badge",sticky:!1,sort:!1,visible:!0,download:!0},{label:"",cssLabel:[],property:"icEdit",cssProperty:[],type:"icon",action:"edit",sticky:!1,sort:!1,visible:!0,download:!1},{label:"",cssLabel:[],property:"icDelete",cssProperty:[],type:"icon",action:"remove",sticky:!1,sort:!1,visible:!0,download:!1}],initialSort:"Id",initialSortDir:"desc",filters:{numFilter:0,textFilter:"",stateFilter:null,startDate:"",endDate:"",refresh:!1},resetFilters:{numFilter:0,textFilter:"",stateFilter:null,startDate:"",endDate:"",refresh:!1},getInputs:"",filename:"listado-de-clientes"};var l=i(93075),w=i(64033),t=i(5e3),P=i(63905),u=i(62376),f=i(24850),d=i(92340),y=i(18905),j=i(40520),I=i(40704);let T=(()=>{class o{constructor(e,n){this._http=e,this._alert=n}GetAll(e,n,r,a,h){return this._http.get(`${d.N.api}${u.F.LIST_CLIENTS}?records=${e}&sort=${n}&order=${r}&numPage=${a+1}${h}`).pipe((0,f.U)(ut=>this.transformClientData(ut)))}transformClientData(e){const n={0:"text-gray bg-gray-light",1:"text-green bg-green-light"};return e.data.forEach(r=>{r.badgeColor=n[r.state]||"text-gray bg-gray-light",r.icEdit=(0,y.q7)("icEdit","Editar Cliente",!0),r.icDelete=(0,y.q7)("icDelete","Eliminar Cliente",!0)}),e}clientById(e){return this._http.get(`${d.N.api}${u.F.CLIENT_BY_ID}${e}`).pipe((0,f.U)(r=>r.data))}clientRegister(e){return this._http.post(`${d.N.api}${u.F.CLIENT_REGISTER}`,e)}clientEdit(e,n){return this._http.put(`${d.N.api}${u.F.CLIENT_EDIT}${e}`,n)}clientRemove(e){return this._http.put(`${d.N.api}${u.F.CLIENT_REMOVE}${e}`,"").pipe((0,f.U)(r=>{r.isSuccess&&this._alert.success("Excelente",r.message)}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(j.eN),t.LFG(I.c))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var x=i(69808),z=i(25245),V=i(47423),g=i(67322),X=i(77531),_=i(74107),k=i(90508),Z=i(48259);function H(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Campo Nombre es requerido. "),t.qZA())}function W(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Campo Email es requerido. "),t.qZA())}function K(o,s){if(1&o&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.documentTypeId),t.xp6(1),t.hij(" ",e.abbreviation," ")}}function tt(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Campo Tipo de Documento es requerido. "),t.qZA())}function et(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Campo N\xb0 Documento es requerido. "),t.qZA())}function nt(o,s){if(1&o&&(t.TgZ(0,"mat-option",18),t._uU(1),t.qZA()),2&o){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.label," ")}}function ot(o,s){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Campo Estado es requerido. "),t.qZA())}let N=(()=>{class o{constructor(e,n,r,a,h,C){this.data=e,this._fb=n,this._documentTypeService=r,this._clientService=a,this._alert=h,this._dialogRef=C,this.icClose=c.j.prototype.getIcon("icClose"),this.configs=w.statesSelect,this.initForm()}initForm(){this.form=this._fb.group({clientId:[0,[l.kI.required]],name:["",[l.kI.required]],email:["",[l.kI.required]],documentTypeId:["",[l.kI.required]],documentNumber:["",[l.kI.required]],address:[""],phone:[""],state:["",[l.kI.required]]})}ngOnInit(){this.listDocumentTypes(),"edit"==this.data.mode&&this.clientById(this.data.dialogConfig.data.clientId)}clientById(e){this._clientService.clientById(e).subscribe(n=>{this.form.reset({clientId:n.clientId,name:n.name,email:n.email,documentTypeId:n.documentTypeId,documentNumber:n.documentNumber,address:n.address,phone:n.phone,state:n.state})})}listDocumentTypes(){this._documentTypeService.listDocumentTypes().subscribe(e=>{this.documentTypes=e})}clientSave(){if(this.form.invalid)return Object.values(this.form.controls).forEach(n=>{n.markAllAsTouched()});const e=this.form.get("clientId").value;e>0?this.clientEdit(e):this.clientRegister()}clientRegister(){this._clientService.clientRegister(this.form.value).subscribe(e=>{e.isSuccess?(this._alert.success("Excelente",e.message),this._dialogRef.close(!0)):this._alert.warn("Atenci\xf3n",e.message)})}clientEdit(e){this._clientService.clientEdit(e,this.form.value).subscribe(n=>{n.isSuccess?(this._alert.success("Excelente",n.message),this._dialogRef.close(!0)):this._alert.warn("Atenci\xf3n",n.message)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.WI),t.Y36(l.qu),t.Y36(P.B),t.Y36(T),t.Y36(I.c),t.Y36(m.so))},o.\u0275cmp=t.Xpm({type:o,selectors:[["vex-client-manage"]],decls:48,vars:11,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title","",1,"flex","justify-between"],[1,"headline","m-0","text-xl","text-accent"],["mat-dialog-close","","mat-icon-button","",1,"text-secondary"],[3,"icIcon"],["appearance","outline",1,"w-full"],["matInput","","formControlName","name"],[4,"ngIf"],["matInput","","formControlName","email"],["formControlName","documentTypeId"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","documentNumber"],["matInput","","formControlName","phone"],["matInput","","formControlName","address"],["formControlName","state"],["align","end"],["mat-button","","mat-dialog-close",""],["color","purple","mat-button","","type","submit",1,"bg-accent","text-accent-contrast",3,"disabled"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.clientSave()}),t.TgZ(1,"div",1)(2,"h2",2)(3,"strong"),t._uU(4),t.qZA()(),t.TgZ(5,"button",3),t._UZ(6,"mat-icon",4),t.qZA()(),t.TgZ(7,"mat-dialog-content")(8,"mat-form-field",5)(9,"mat-label"),t._uU(10,"Nombre"),t.qZA(),t._UZ(11,"input",6),t.YNc(12,H,2,0,"mat-error",7),t.qZA(),t.TgZ(13,"mat-form-field",5)(14,"mat-label"),t._uU(15,"Email"),t.qZA(),t._UZ(16,"input",8),t.YNc(17,W,2,0,"mat-error",7),t.qZA(),t.TgZ(18,"mat-form-field",5)(19,"mat-label"),t._uU(20,"Tipo de Documento"),t.qZA(),t.TgZ(21,"mat-select",9),t.YNc(22,K,2,2,"mat-option",10),t.qZA(),t.YNc(23,tt,2,0,"mat-error",7),t.qZA(),t.TgZ(24,"mat-form-field",5)(25,"mat-label"),t._uU(26,"N\xb0 Documento"),t.qZA(),t._UZ(27,"input",11),t.YNc(28,et,2,0,"mat-error",7),t.qZA(),t.TgZ(29,"mat-form-field",5)(30,"mat-label"),t._uU(31,"Tel\xe9fono"),t.qZA(),t._UZ(32,"input",12),t.qZA(),t.TgZ(33,"mat-form-field",5)(34,"mat-label"),t._uU(35,"Direcci\xf3n"),t.qZA(),t._UZ(36,"input",13),t.qZA(),t.TgZ(37,"mat-form-field",5)(38,"mat-label"),t._uU(39,"Estado"),t.qZA(),t.TgZ(40,"mat-select",14),t.YNc(41,nt,2,2,"mat-option",10),t.qZA(),t.YNc(42,ot,2,0,"mat-error",7),t.qZA()(),t.TgZ(43,"mat-dialog-actions",15)(44,"button",16),t._uU(45,"CANCELAR"),t.qZA(),t.TgZ(46,"button",17),t._uU(47," GUARDAR "),t.qZA()()()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(4),t.Oqu("register"==n.data.mode?"Registrar Nuevo Cliente":"Actualizar Cliente"),t.xp6(2),t.Q6J("icIcon",n.icClose),t.xp6(6),t.Q6J("ngIf",n.form.get("name").hasError("required")),t.xp6(5),t.Q6J("ngIf",n.form.get("email").hasError("required")),t.xp6(5),t.Q6J("ngForOf",n.documentTypes),t.xp6(1),t.Q6J("ngIf",n.form.get("documentTypeId").hasError("required")),t.xp6(5),t.Q6J("ngIf",n.form.get("documentNumber").hasError("required")),t.xp6(13),t.Q6J("ngForOf",n.configs),t.xp6(1),t.Q6J("ngIf",n.form.get("state").hasError("required")),t.xp6(4),t.Q6J("disabled",n.form.invalid))},dependencies:[x.sg,x.O5,m.ZT,m.uh,m.xY,m.H8,z.Hw,V.lW,g.TO,g.KE,g.hX,X.Nt,_.gD,k.ey,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,Z.ar]}),o})();var it=i(35226),rt=i.n(it),st=i(31421),D=i(2638),A=i(26724),E=i(3343),F=i(57638),S=i(41248),U=i(24161),L=i(93495);const lt=[{path:"",component:(()=>{class o{constructor(e,n,r){this._clientService=n,this._dialog=r,e.set("Clientes")}ngOnInit(){this.component=Q}setMenu(e){this.component.filters.stateFilter=e,this.formatGetInputs()}search(e){this.component.filters.numFilter=e.searchValue,this.component.filters.textFilter=e.searchData,this.formatGetInputs()}searchDateRange(e){this.component.filters.startDate=e.startDate,this.component.filters.endDate=e.endDate,this.formatGetInputs()}resetFilters(){this.component.filters=Object.assign({},this.component.resetFilters),this.formatGetInputs()}formatGetInputs(){let e="";null!=this.component.filters.textFilter&&(e+=`&numFilter=${this.component.filters.numFilter}&textFilter=${this.component.filters.textFilter}`),null!=this.component.filters.stateFilter&&(e+=`&stateFilter=${this.component.filters.stateFilter}`),""!=this.component.filters.startDate&&""!=this.component.filters.endDate&&(e+=`&startDate=${this.component.filters.startDate}`,e+=`&endDate=${this.component.filters.endDate}`),this.component.filters.refresh&&(e+=`&refresh=${Math.random()}`,this.component.filters.refresh=!1),this.component.getInputs=e}setGetInputsClients(e){this.component.filters.refresh=e,this.formatGetInputs()}get getDownloadUrl(){return"Client?Download=True"}openDialogRegister(){this._dialog.open(N,{disableClose:!0,width:"400px",data:{mode:"register"}}).afterClosed().subscribe(e=>{e&&this.setGetInputsClients(!0)})}rowClick(e){let r=e.row;switch(e.action){case"edit":this.clientEdit(r);break;case"remove":this.clientRemove(r)}}clientEdit(e){const n=new m.vA;n.data=e,this._dialog.open(N,{data:{dialogConfig:n,mode:"edit"},disableClose:!0,width:"400px"}).afterClosed().subscribe(r=>{r&&this.setGetInputsClients(!0)})}clientRemove(e){rt().fire({title:`\xbfRealmente deseas eliminar el cliente ${e.name}?`,text:"Se borrar\xe1 de forma permanente!",icon:"warning",showCancelButton:!0,focusCancel:!0,confirmButtonColor:"rgb(210, 155, 253)",cancelButtonColor:"rgb(79, 109, 253)",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar",width:430}).then(n=>{n.isConfirmed&&this._clientService.clientRemove(e.clientId).subscribe(()=>this.setGetInputsClients(!0))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(st.O),t.Y36(T),t.Y36(m.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["vex-client-list"]],decls:21,vars:18,consts:[[1,"w-full","h-full","flex","flex-col"],[1,"px-gutter","pt-1","pb-20","bg-primary","flex-none"],[1,"flex","items-center","justify-between"],[1,"headline","text-primary-contrast","m-0","flex","items-center","w-full","max-w-xxxl","mr-6"],[1,"hidden","sm:block",3,"icon"],[1,"ml-4","block"],[1,"flex","items-center","justify-end","w-full","mt-5"],[1,"flex","justify-between"],[3,"start","end","rangeDate"],[3,"buttonClick"],[1,"flex","justify-between","ml-6"],[3,"searchOptions","currentValue","search"],[3,"url","getInputs","filename"],[1,"-mt-14","pt-0","overflow-hidden","flex"],[1,"bg-transparent","flex-auto","flex"],[1,"p-gutter","pt-0","flex-auto","flex","items-start"],["buttonLabel","AGREGAR",1,"hidden","sm:block","mr-6",3,"currentMenu","items","buttonShow","filterChange","buttonClick"],[1,"card","h-full","overflow-hidden","flex-auto"],[3,"service","columns","sortBy","sortDir","getInputs","rowClick"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._UZ(4,"ic-icon",4),t.TgZ(5,"span",5),t._uU(6,"Gesti\xf3n de Clientes"),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7)(9,"app-filter-date-range-ymd",8),t.NdJ("rangeDate",function(a){return n.searchDateRange(a)}),t.qZA(),t.TgZ(10,"app-button-reset-filters",9),t.NdJ("buttonClick",function(){return n.resetFilters()}),t.qZA()(),t.TgZ(11,"div",10)(12,"app-search-box-multiple",11),t.NdJ("search",function(a){return n.search(a)}),t.qZA()(),t.TgZ(13,"div"),t._UZ(14,"app-export-excel",12),t.qZA()()()(),t.TgZ(15,"div",13)(16,"mat-drawer-container",14)(17,"mat-drawer-content",15)(18,"app-menu",16),t.NdJ("filterChange",function(a){return n.setMenu(a)})("buttonClick",function(){return n.openDialogRegister()}),t.qZA(),t.TgZ(19,"div",17)(20,"app-list-table",18),t.NdJ("rowClick",function(a){return n.rowClick(a)}),t.qZA()()()()()()),2&e&&(t.xp6(4),t.Q6J("@scaleIn",void 0)("icon",n.component.icClient),t.xp6(1),t.Q6J("@fadeInRight",void 0),t.xp6(4),t.Q6J("start",n.component.filters.startDate)("end",n.component.filters.endDate),t.xp6(3),t.Q6J("searchOptions",n.component.searchOptions)("currentValue",n.component.filters.textFilter),t.xp6(2),t.Q6J("url",n.getDownloadUrl)("getInputs",n.component.getInputs)("filename",n.component.filename),t.xp6(4),t.Q6J("currentMenu",n.component.getInputs.stateFilter)("items",n.component.menuItems)("buttonShow",!0),t.xp6(2),t.Q6J("service",n._clientService)("columns",n.component.tableColumns)("sortBy",n.component.initialSort)("sortDir",n.component.initialSortDir)("getInputs",n.component.getInputs))},dependencies:[D.kh,D.LW,Z.ar,A.z,E.J,F.M,S.$,U.X,L.I],data:{animation:[M.KF,J.a,R.G]}}),o})(),data:{scrollDisabled:!0,toolbarShadowEnabled:!0}}];let at=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[b.Bz.forChild(lt),b.Bz]}),o})();var mt=i(72628);let ct=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[at,mt.m,A.z,E.J,F.M,S.$,U.X,L.I]}),o})()}}]);