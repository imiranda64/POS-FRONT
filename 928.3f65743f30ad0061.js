"use strict";(self.webpackChunkvex=self.webpackChunkvex||[]).push([[928],{68928:(pe,I,i)=>{i.r(I),i.d(I,{ProviderModule:()=>ue});var v=i(69808),C=i(26724),T=i(57638),x=i(3343),M=i(72628),Z=i(68555),L=i(16496),O=i(49597),$=i(48535),c=i(11612),g=i(28222);const B=[{label:"Nombre",value:1,placeholder:"Buscar por Nombre",validation:[g.R.defaultName],validation_desc:"S\xf3lo se permite letras en esta b\xfasqueda.",icon:"icName"},{label:"Email",value:2,placeholder:"Buscar por Email",validation:[g.R.emailValidation],validation_desc:"S\xf3lo se permite correos v\xe1lidos.",icon:"icMail"},{label:"N\xb0 Documento",value:3,placeholder:"Buscar por N\xb0 Documento",validation:[g.R.dni],validation_desc:"S\xf3lo se permite documentos v\xe1lidos.",icon:"icDescription"}],q=[{type:"link",id:"all",icon:c.j.prototype.getIcon("icViewHeadline"),label:"Todos"},{type:"link",id:"Activo",value:1,icon:c.j.prototype.getIcon("icLabel"),label:"Activo",class:{icon:"text-green"}},{type:"link",id:"Inactivo",value:0,icon:c.j.prototype.getIcon("icLabel"),label:"Inactivo",class:{icon:"text-gray"}}],j={icProvider:c.j.prototype.getIcon("icProvider"),searchOptions:B,menuItems:q,tableColumns:[{label:"NOMBRE",cssLabel:["font-bold","text-sm"],property:"name",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!0,sort:!0,sortProperty:"name",visible:!0,download:!0},{label:"EMAIL",cssLabel:["font-bold","text-sm"],property:"email",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"email",visible:!0,download:!0},{label:"TIPO DOCUMENTO",cssLabel:["font-bold","text-sm"],property:"documentType",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"documentType",visible:!0,download:!0},{label:"N\xb0 DOCUMENTO",cssLabel:["font-bold","text-sm"],property:"documentNumber",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"documentNumber",visible:!0,download:!0},{label:"DIRECCI\xd3N",cssLabel:["font-bold","text-sm"],property:"address",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"address",visible:!0,download:!0},{label:"TEL\xc9FONO",cssLabel:["font-bold","text-sm"],property:"phone",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"phone",visible:!0,download:!0},{label:"F. DE CREACI\xd3N",cssLabel:["font-bold","text-sm"],property:"auditCreateDate",cssProperty:["font-semibold","text-sm","text-left"],type:"datetime",sticky:!1,sort:!0,visible:!0,download:!0},{label:"ESTADO",cssLabel:["font-bold","text-sm"],property:"stateProvider",cssProperty:["font-semibold","text-sm","text-left"],type:"badge",sticky:!1,sort:!1,visible:!0,download:!0},{label:"",cssLabel:[],property:"icEdit",cssProperty:[],type:"icon",action:"edit",sticky:!1,sort:!1,visible:!0,download:!1},{label:"",cssLabel:[],property:"icDelete",cssProperty:[],type:"icon",action:"remove",sticky:!1,sort:!1,visible:!0,download:!1}],initialSort:"Id",initialSortDir:"desc",filters:{numFilter:0,textFilter:"",stateFilter:null,startDate:"",endDate:"",refresh:!1},resetFilters:{numFilter:0,textFilter:"",stateFilter:null,startDate:"",endDate:"",refresh:!1},getInputs:"",filename:"listado-de-proveedores"};var m=i(82349),V=i(64033),a=i(93075),e=i(5e3),P=i(40704),u=i(62376),D=i(18905),f=i(24850),p=i(92340),_=i(40520);let N=(()=>{class r{constructor(t,o){this._http=t,this._alert=o}GetAll(t,o,n,l,b){return this._http.get(`${p.N.api}${u.F.LIST_PROVIDERS}?records=${t}&sort=${o}&order=${n}&numPage=${l+1}${b}`).pipe((0,f.U)(J=>(J.data.forEach(function(d){switch(d.state){case 0:default:d.badgeColor="text-gray bg-gray-light";break;case 1:d.badgeColor="text-green bg-green-light"}d.icEdit=(0,D.q7)("icEdit","Editar Proveedor",!0),d.icDelete=(0,D.q7)("icDelete","Eliminar Proveedor",!0)}),J)))}providerById(t){return this._http.get(`${p.N.api}${u.F.PROVIDER_BY_ID}${t}`).pipe((0,f.U)(n=>n.data))}providerRegister(t){return this._http.post(`${p.N.api}${u.F.PROVIDER_REGISTER}`,t).pipe((0,f.U)(n=>n))}providerEdit(t,o){return this._http.put(`${p.N.api}${u.F.PROVIDER_EDIT}${t}`,o)}providerRemove(t){return this._http.put(`${p.N.api}${u.F.PROVIDER_REMOVE}${t}`,"").pipe((0,f.U)(n=>{n.isSuccess&&this._alert.success("Excelente",n.message)}))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(_.eN),e.LFG(P.c))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var k=i(63905),z=i(25245),X=i(47423),h=i(67322),H=i(77531),W=i(74107),K=i(90508),A=i(48259);function ee(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Campo Nombre es requerido. "),e.qZA())}function te(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Campo Email es requerido. "),e.qZA())}function oe(r,s){if(1&r&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("value",t.documentTypeId),e.xp6(1),e.hij(" ",t.abbreviation," ")}}function re(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Campo Tipo de Documento es requerido. "),e.qZA())}function ie(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Campo N\xb0 Documento es requerido. "),e.qZA())}function ne(r,s){if(1&r&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&r){const t=s.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function se(r,s){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Campo Estado es requerido. "),e.qZA())}let E=(()=>{class r{constructor(t,o,n,l,b,y){this.data=t,this._fb=o,this._alert=n,this._providerService=l,this._dialogRef=b,this._documentTypeService=y,this.icClose=c.j.prototype.getIcon("icClose"),this.configs=V,this.initForm()}initForm(){this.form=this._fb.group({providerId:[0,[a.kI.required]],name:["",[a.kI.required]],email:["",[a.kI.required]],documentTypeId:["",[a.kI.required]],documentNumber:["",[a.kI.required]],address:[""],phone:[""],state:["",[a.kI.required]]})}ngOnInit(){this.listDocumentTypes(),null!=this.data&&this.providerById(this.data.data.providerId)}listDocumentTypes(){this._documentTypeService.listDocumentTypes().subscribe(t=>{this.documentTypes=t})}providerById(t){this._providerService.providerById(t).subscribe(o=>{this.form.reset({providerId:o.providerId,name:o.name,email:o.email,documentTypeId:o.documentTypeId,documentNumber:o.documentNumber,address:o.address,phone:o.phone,state:o.state})})}providerSave(){if(this.form.invalid)return Object.values(this.form.controls).forEach(o=>{o.markAllAsTouched()});const t=this.form.get("providerId").value;t>0?this.providerEdit(t):this.providerRegister()}providerRegister(){this._providerService.providerRegister(this.form.value).subscribe(t=>{t.isSuccess?(this._alert.success("Excelente",t.message),this._dialogRef.close(!0)):this._alert.warn("Atenci\xf3n",t.message)})}providerEdit(t){this._providerService.providerEdit(t,this.form.value).subscribe(o=>{o.isSuccess&&(this._alert.success("Excelente",o.message),this._dialogRef.close(!0))})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.WI),e.Y36(a.qu),e.Y36(P.c),e.Y36(N),e.Y36(m.so),e.Y36(k.B))},r.\u0275cmp=e.Xpm({type:r,selectors:[["vex-provider-manage"]],decls:48,vars:10,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title","",1,"flex","justify-between"],[1,"headline","m-0","text-xl","text-accent"],["mat-dialog-close","","mat-icon-button","",1,"text-secondary"],[3,"icIcon"],["appearance","outline",1,"w-full"],["matInput","","formControlName","name"],[4,"ngIf"],["matInput","","formControlName","email"],["formControlName","documentTypeId",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","documentNumber"],["matInput","","formControlName","phone"],["matInput","","formControlName","address"],["formControlName","state"],["align","end"],["mat-button","","mat-dialog-close",""],["color","purple","mat-button","","type","submit",1,"bg-accent","text-accent-contrast",3,"disabled"],[3,"value"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.providerSave()}),e.TgZ(1,"div",1)(2,"h2",2)(3,"strong"),e._uU(4,"Gesti\xf3n de Proveedor"),e.qZA()(),e.TgZ(5,"button",3),e._UZ(6,"mat-icon",4),e.qZA()(),e.TgZ(7,"mat-dialog-content")(8,"mat-form-field",5)(9,"mat-label"),e._uU(10,"Nombre"),e.qZA(),e._UZ(11,"input",6),e.YNc(12,ee,2,0,"mat-error",7),e.qZA(),e.TgZ(13,"mat-form-field",5)(14,"mat-label"),e._uU(15,"Email"),e.qZA(),e._UZ(16,"input",8),e.YNc(17,te,2,0,"mat-error",7),e.qZA(),e.TgZ(18,"mat-form-field",5)(19,"mat-label"),e._uU(20,"Tipo de Documento"),e.qZA(),e.TgZ(21,"mat-select",9),e.NdJ("selectionChange",function(){return o.listDocumentTypes()}),e.YNc(22,oe,2,2,"mat-option",10),e.qZA(),e.YNc(23,re,2,0,"mat-error",7),e.qZA(),e.TgZ(24,"mat-form-field",5)(25,"mat-label"),e._uU(26,"N\xb0 Documento"),e.qZA(),e._UZ(27,"input",11),e.YNc(28,ie,2,0,"mat-error",7),e.qZA(),e.TgZ(29,"mat-form-field",5)(30,"mat-label"),e._uU(31,"Tel\xe9fono"),e.qZA(),e._UZ(32,"input",12),e.qZA(),e.TgZ(33,"mat-form-field",5)(34,"mat-label"),e._uU(35,"Direcci\xf3n"),e.qZA(),e._UZ(36,"input",13),e.qZA(),e.TgZ(37,"mat-form-field",5)(38,"mat-label"),e._uU(39,"Estado"),e.qZA(),e.TgZ(40,"mat-select",14),e.YNc(41,ne,2,2,"mat-option",10),e.qZA(),e.YNc(42,se,2,0,"mat-error",7),e.qZA()(),e.TgZ(43,"mat-dialog-actions",15)(44,"button",16),e._uU(45,"CANCELAR"),e.qZA(),e.TgZ(46,"button",17),e._uU(47," GUARDAR "),e.qZA()()()),2&t&&(e.Q6J("formGroup",o.form),e.xp6(6),e.Q6J("icIcon",o.icClose),e.xp6(6),e.Q6J("ngIf",o.form.get("name").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.form.get("email").hasError("required")),e.xp6(5),e.Q6J("ngForOf",o.documentTypes),e.xp6(1),e.Q6J("ngIf",o.form.get("documentTypeId").hasError("required")),e.xp6(5),e.Q6J("ngIf",o.form.get("documentNumber").hasError("required")),e.xp6(13),e.Q6J("ngForOf",o.configs.statesSelect),e.xp6(1),e.Q6J("ngIf",o.form.get("state").hasError("required")),e.xp6(4),e.Q6J("disabled",o.form.invalid))},dependencies:[v.sg,v.O5,m.ZT,m.uh,m.xY,m.H8,z.Hw,X.lW,h.TO,h.KE,h.hX,H.Nt,W.gD,K.ey,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,A.ar]}),r})();var ae=i(35226),le=i.n(ae),me=i(31421),F=i(2638),R=i(41248),S=i(24161),U=i(93495);const de=[{path:"",component:(()=>{class r{constructor(t,o,n){this._providerService=o,this._dialog=n,t.set("Proveedores")}ngOnInit(){this.component=j}setMenu(t){this.component.filters.stateFilter=t,this.formatGetInputs()}search(t){this.component.filters.numFilter=t.searchValue,this.component.filters.textFilter=t.searchData,this.formatGetInputs()}searchDateRange(t){this.component.filters.startDate=t.startDate,this.component.filters.endDate=t.endDate,this.formatGetInputs()}resetFilters(){this.component.filters=Object.assign({},this.component.resetFilters),this.formatGetInputs()}formatGetInputs(){let t="";null!=this.component.filters.textFilter&&(t+=`&numFilter=${this.component.filters.numFilter}&textFilter=${this.component.filters.textFilter}`),null!=this.component.filters.stateFilter&&(t+=`&stateFilter=${this.component.filters.stateFilter}`),""!=this.component.filters.startDate&&""!=this.component.filters.endDate&&(t+=`&startDate=${this.component.filters.startDate}`,t+=`&endDate=${this.component.filters.endDate}`),this.component.filters.refresh&&(t+=`&refresh=${Math.random()}`,this.component.filters.refresh=!1),this.component.getInputs=t}openDialogRegister(){this._dialog.open(E,{disableClose:!0,width:"400px"}).afterClosed().subscribe(t=>{t&&this.setGetInputsProviders(!0)})}rowClick(t){let n=t.row;switch(t.action){case"edit":this.providerEdit(n);break;case"remove":this.providerRemove(n)}return!1}providerEdit(t){const o=new m.vA;o.data=t,this._dialog.open(E,{data:o,disableClose:!0,width:"400px"}).afterClosed().subscribe(n=>{n&&this.setGetInputsProviders(!0)})}providerRemove(t){le().fire({title:`\xbfRealmente deseas eliminar el proveedor ${t.name}?`,text:"Se borrar\xe1 de forma permanente!",icon:"warning",showCancelButton:!0,focusCancel:!0,confirmButtonColor:"rgb(210, 155, 253)",cancelButtonColor:"rgb(79, 109, 253)",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar",width:430}).then(o=>{o.isConfirmed&&this._providerService.providerRemove(t.providerId).subscribe(()=>this.setGetInputsProviders(!0))})}setGetInputsProviders(t){this.component.filters.refresh=t,this.formatGetInputs()}get getDownloadUrl(){return"Provider?Download=True"}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(me.O),e.Y36(N),e.Y36(m.uw))},r.\u0275cmp=e.Xpm({type:r,selectors:[["vex-provider-list"]],decls:21,vars:18,consts:[[1,"w-full","h-full","flex","flex-col"],[1,"px-gutter","pt-1","pb-20","bg-primary","flex-none"],[1,"flex","items-center","justify-between"],[1,"headline","text-primary-contrast","m-0","flex","items-center","w-full","max-w-xxxl","mr-6"],[1,"hidden","sm:block",3,"icon"],[1,"ml-4","block"],[1,"flex","items-center","justify-end","w-full","mt-5"],[1,"flex","justify-between"],[3,"start","end","rangeDate"],[3,"buttonClick"],[1,"flex","justify-between","ml-6"],[3,"searchOptions","currentValue","search"],[3,"url","getInputs","filename"],[1,"-mt-14","pt-0","overflow-hidden","flex"],[1,"bg-transparent","flex-auto","flex"],[1,"p-gutter","pt-0","flex-auto","flex","items-start"],["buttonLabel","AGREGAR",1,"hidden","sm:block","mr-6",3,"currentMenu","items","buttonShow","filterChange","buttonClick"],[1,"card","h-full","overflow-hidden","flex-auto"],[3,"service","columns","sortBy","sortDir","getInputs","rowClick"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._UZ(4,"ic-icon",4),e.TgZ(5,"span",5),e._uU(6,"Gesti\xf3n de Proveedores"),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7)(9,"app-filter-date-range-ymd",8),e.NdJ("rangeDate",function(l){return o.searchDateRange(l)}),e.qZA(),e.TgZ(10,"app-button-reset-filters",9),e.NdJ("buttonClick",function(){return o.resetFilters()}),e.qZA()(),e.TgZ(11,"div",10)(12,"app-search-box-multiple",11),e.NdJ("search",function(l){return o.search(l)}),e.qZA()(),e.TgZ(13,"div"),e._UZ(14,"app-export-excel",12),e.qZA()()()(),e.TgZ(15,"div",13)(16,"mat-drawer-container",14)(17,"mat-drawer-content",15)(18,"app-menu",16),e.NdJ("filterChange",function(l){return o.setMenu(l)})("buttonClick",function(){return o.openDialogRegister()}),e.qZA(),e.TgZ(19,"div",17)(20,"app-list-table",18),e.NdJ("rowClick",function(l){return o.rowClick(l)}),e.qZA()()()()()()),2&t&&(e.xp6(4),e.Q6J("@scaleIn",void 0)("icon",o.component.icProvider),e.xp6(1),e.Q6J("@fadeInRight",void 0),e.xp6(4),e.Q6J("start",o.component.filters.startDate)("end",o.component.filters.endDate),e.xp6(3),e.Q6J("searchOptions",o.component.searchOptions)("currentValue",o.component.filters.textFilter),e.xp6(2),e.Q6J("url",o.getDownloadUrl)("getInputs",o.component.getInputs)("filename",o.component.filename),e.xp6(4),e.Q6J("currentMenu",o.component.getInputs.stateFilter)("items",o.component.menuItems)("buttonShow",!0),e.xp6(2),e.Q6J("service",o._providerService)("columns",o.component.tableColumns)("sortBy",o.component.initialSort)("sortDir",o.component.initialSortDir)("getInputs",o.component.getInputs))},dependencies:[F.kh,F.LW,A.ar,C.z,x.J,T.M,R.$,S.X,U.I],data:{animation:[$.KF,O.a,L.G]}}),r})(),data:{scrollDisabled:!0,toolbarShadowEnabled:!0}}];let ce=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[Z.Bz.forChild(de),Z.Bz]}),r})(),ue=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[v.ez,ce,M.m,C.z,x.J,T.M,R.$,S.X,U.I]}),r})()}}]);