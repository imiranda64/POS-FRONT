(self.webpackChunkvex=self.webpackChunkvex||[]).push([[972],{48810:($,f)=>{f.Z={body:'<path d="M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 2v3H4V5h16zM4 21V10h16v11H4z" fill="currentColor"/><path opacity=".3" d="M4 5.01h16V8H4z" fill="currentColor"/>',width:24,height:24}},82972:($,f,r)=>{"use strict";r.r(f),r.d(f,{CategoryModule:()=>dt});var u=r(69808),b=r(68555),c=r(82349),J=r(16496),M=r(49597),O=r(48535),w=r(35226),B=r.n(w),l=r(93075),Y=r(96936),Q=r(64033),t=r(5e3),x=r(40704),d=r(62376),I=r(18905),p=r(24850),g=r(92340),P=r(40520);let D=(()=>{class a{constructor(e,o){this._http=e,this._alert=o}GetAll(e,o,n,i,v){return this._http.get(`${g.N.api}${d.F.LIST_CATEGORIES}?records=${e}&sort=${o}&order=${n}&numPage=${i+1}${v}`).pipe((0,p.U)(U=>(U.data.forEach(function(m){switch(m.state){case 0:default:m.badgeColor="text-gray bg-gray-light";break;case 1:m.badgeColor="text-green bg-green-light"}m.icEdit=(0,I.q7)("icEdit","Editar Categor\xeda",!0),m.icDelete=(0,I.q7)("icDelete","Eliminar Categor\xeda",!0)}),U)))}CategoryRegister(e){return this._http.post(`${g.N.api}${d.F.CATEGORY_REGISTER}`,e).pipe((0,p.U)(n=>n))}CategoryById(e){return this._http.get(`${g.N.api}${d.F.CATEGORY_BY_ID}${e}`).pipe((0,p.U)(n=>n.data))}CategoryEdit(e,o){return this._http.put(`${g.N.api}${d.F.CATEGORY_EDIT}${e}`,o).pipe((0,p.U)(i=>i))}CategoryRemove(e){return this._http.put(`${g.N.api}${d.F.CATEGORY_REMOVE}${e}`,"").pipe((0,p.U)(n=>{n.isSuccess&&this._alert.success("Excelente",n.message)}))}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(P.eN),t.LFG(x.c))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var j=r(25245),V=r(47423),y=r(67322),z=r(77531),H=r(74107),X=r(90508),Z=r(48259),h=r(77093);function W(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Campo Nombre es requerido. "),t.qZA())}function K(a,s){if(1&a&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&a){const e=s.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.label," ")}}function k(a,s){1&a&&(t.TgZ(0,"mat-error"),t._uU(1," Campo Estado es requerido. "),t.qZA())}let F=(()=>{class a{constructor(e,o,n,i,v){this.data=e,this._fb=o,this._alert=n,this._categoryService=i,this._dialogRef=v,this.icClose=Y.Z,this.configs=Q,this.initForm()}initForm(){this.form=this._fb.group({categoryId:[0,[l.kI.required]],name:["",[l.kI.required]],description:[""],state:["",[l.kI.required]]})}ngOnInit(){null!=this.data&&this.CategoryById(this.data.data.categoryId)}CategoryById(e){this._categoryService.CategoryById(e).subscribe(o=>{this.form.reset({categoryId:o.categoryId,name:o.name,description:o.description,state:o.state})})}CategorySave(){if(this.form.invalid)return Object.values(this.form.controls).forEach(o=>{o.markAllAsTouched()});const e=this.form.get("categoryId").value;e>0?this.CategoryEdit(e):this.CategoryRegister()}CategoryRegister(){this._categoryService.CategoryRegister(this.form.value).subscribe(e=>{e.isSuccess?(this._alert.success("Excelente",e.message),this._dialogRef.close(!0)):this._alert.warn("Atenci\xf3n",e.message)})}CategoryEdit(e){this._categoryService.CategoryEdit(e,this.form.value).subscribe(o=>{o.isSuccess?(this._alert.success("Excelente",o.message),this._dialogRef.close(!0)):this._alert.warn("Atenci\xf3n",o.message)})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c.WI),t.Y36(l.qu),t.Y36(x.c),t.Y36(D),t.Y36(c.so))},a.\u0275cmp=t.Xpm({type:a,selectors:[["vex-category-manage"]],decls:31,vars:6,consts:[[3,"formGroup","ngSubmit"],["fxLayout","row","fxLayoutAlign","start center","mat-dialog-title",""],["fxFlex","auto",1,"headline","m-0","text-xl","text-accent"],["mat-dialog-close","","mat-icon-button","","type","button",1,"text-secondary"],[3,"icIcon"],["fxLayout","row","fxLayoutGap","16px"],["appearance","outline","fxFlex","100"],["matInput","","formControlName","name"],[4,"ngIf"],["matInput","","formControlName","description"],["formControlName","state"],[3,"value",4,"ngFor","ngForOf"],["align","end"],["mat-button","","mat-dialog-close","","type","button"],["color","purple","mat-button","","type","submit",1,"bg-accent","text-accent-contrast",3,"disabled"],[3,"value"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.CategorySave()}),t.TgZ(1,"div",1)(2,"h2",2)(3,"strong"),t._uU(4,"Gesti\xf3n de Categor\xeda"),t.qZA()(),t.TgZ(5,"button",3),t._UZ(6,"mat-icon",4),t.qZA()(),t.TgZ(7,"mat-dialog-content")(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),t._uU(11,"Nombre"),t.qZA(),t._UZ(12,"input",7),t.YNc(13,W,2,0,"mat-error",8),t.qZA()(),t.TgZ(14,"div",5)(15,"mat-form-field",6)(16,"mat-label"),t._uU(17,"Descripci\xf3n"),t.qZA(),t._UZ(18,"input",9),t.qZA()(),t.TgZ(19,"div",5)(20,"mat-form-field",6)(21,"mat-label"),t._uU(22,"Estado"),t.qZA(),t.TgZ(23,"mat-select",10),t.YNc(24,K,2,2,"mat-option",11),t.qZA(),t.YNc(25,k,2,0,"mat-error",8),t.qZA()()(),t.TgZ(26,"mat-dialog-actions",12)(27,"button",13),t._uU(28,"CANCELAR"),t.qZA(),t.TgZ(29,"button",14),t._uU(30,"GUARDAR"),t.qZA()()()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(6),t.Q6J("icIcon",o.icClose),t.xp6(7),t.Q6J("ngIf",o.form.get("name").hasError("required")),t.xp6(11),t.Q6J("ngForOf",o.configs.statesSelect),t.xp6(1),t.Q6J("ngIf",o.form.get("state").hasError("required")),t.xp6(4),t.Q6J("disabled",!o.form.valid))},dependencies:[u.sg,u.O5,c.ZT,c.uh,c.xY,c.H8,j.Hw,V.lW,y.TO,y.KE,y.hX,z.Nt,H.gD,X.ey,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,Z.ar,h.xw,h.SQ,h.Wh,h.yH]}),a})();var q=r(78861),_=r(48810),T=r(28222),C=r(11612);const tt=[{label:"Nombre",value:1,placeholder:"Buscar por Nombre",validation:[T.R.defaultName],validation_desc:"S\xf3lo se permite letras en esta b\xfasqueda.",icon:"icName"},{label:"Descripci\xf3n",value:2,placeholder:"Buscar por Descripci\xf3n",validation:[T.R.defaultDescription],validation_desc:"S\xf3lo se permite letras y n\xfameros en esta b\xfasqueda.",icon:"icDescription"}],et=[{type:"link",id:"all",icon:C.j.prototype.getIcon("icViewHeadline"),label:"Todos"},{type:"link",id:"Activo",value:1,icon:C.j.prototype.getIcon("icLabel"),label:"Activo",class:{icon:"text-green"}},{type:"link",id:"Inactivo",value:0,icon:C.j.prototype.getIcon("icLabel"),label:"Inactivo",class:{icon:"text-gray"}}],st={icCategory:q.Z,icCalendarMonth:_.Z,menuOpen:!1,tableColumns:[{label:"NOMBRE",cssLabel:["font-bold","text-sm"],property:"name",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!0,sort:!0,sortProperty:"name",visible:!0,download:!0},{label:"DESCRIPCI\xd3N",cssLabel:["font-bold","text-sm"],property:"description",cssProperty:["font-semibold","text-sm","text-left"],type:"text",sticky:!1,sort:!0,sortProperty:"description",visible:!0,download:!0},{label:"F. DE CREACI\xd3N",cssLabel:["font-bold","text-sm"],property:"auditCreateDate",cssProperty:["font-semibold","text-sm","text-left"],type:"datetime",sticky:!1,sort:!0,visible:!0,download:!0},{label:"ESTADO",cssLabel:["font-bold","text-sm"],property:"stateCategory",cssProperty:["font-semibold","text-sm","text-left"],type:"badge",sticky:!1,sort:!1,visible:!0,download:!0},{label:"",cssLabel:[],property:"icEdit",cssProperty:[],type:"icon",action:"edit",sticky:!1,sort:!1,visible:!0,download:!1},{label:"",cssLabel:[],property:"icDelete",cssProperty:[],type:"icon",action:"remove",sticky:!1,sort:!1,visible:!0,download:!1}],initialSort:"Id",initialSortDir:"desc",getInputs:"",buttonLabel:"EDITAR",buttonLabel2:"ELIMINAR",menuItems:et,searchOptions:tt,filters_dates_active:!1,filters:{numFilter:0,textFilter:"",stateFilter:null,startDate:"",endDate:"",refresh:!1},resetFilters:{numFilter:0,textFilter:"",stateFilter:null,startDate:"",endDate:"",refresh:!1},datesFilterArray:["Fecha de creaci\xf3n"],filename:"listado-de-categorias"};var it=r(31421),A=r(2638),lt=r(90080),E=r(26724),R=r(3343),S=r(57638),L=r(41248),N=r(24161),G=r(93495);const ct=[{path:"",component:(()=>{class a{constructor(e,o,n){this._categoryService=o,this._dialog=n,e.set("Categorias")}ngOnInit(){this.component=st}setData(e){this.component.filters.stateFilter=e,this.formatGetInputs()}search(e){this.component.filters.numFilter=e.searchValue,this.component.filters.textFilter=e.searchData,this.formatGetInputs()}searchDateRange(e){this.component.filters.startDate=e.startDate,this.component.filters.endDate=e.endDate,this.formatGetInputs()}resetFilters(){this.component.filters=Object.assign({},this.component.resetFilters),this.formatGetInputs()}formatGetInputs(){let e="";null!=this.component.filters.textFilter&&(e+=`&numFilter=${this.component.filters.numFilter}&textFilter=${this.component.filters.textFilter}`),null!=this.component.filters.stateFilter&&(e+=`&stateFilter=${this.component.filters.stateFilter}`),""!=this.component.filters.startDate&&""!=this.component.filters.endDate&&(e+=`&startDate=${this.component.filters.startDate}`,e+=`&endDate=${this.component.filters.endDate}`),this.component.filters.refresh&&(e+=`&refresh=${Math.random()}`,this.component.filters.refresh=!1),this.component.getInputs=e}openDialogRegister(){this._dialog.open(F,{disableClose:!0,width:"400px"}).afterClosed().subscribe(e=>{e&&this.setGetInputsProviders(!0)})}rowClick(e){let n=e.row;switch(e.action){case"edit":this.CategoryEdit(n);break;case"remove":this.CategoryRemove(n)}return!1}CategoryEdit(e){const o=new c.vA;o.data=e,this._dialog.open(F,{data:o,disableClose:!0,width:"400px"}).afterClosed().subscribe(i=>{i&&this.setGetInputsProviders(!0)})}CategoryRemove(e){B().fire({title:`\xbfRealmente deseas eliminar la categor\xeda ${e.name}?`,text:"Se borrar\xe1 de forma permanente!",icon:"warning",showCancelButton:!0,focusCancel:!0,confirmButtonColor:"rgb(210, 155, 253)",cancelButtonColor:"rgb(79, 109, 253)",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar",width:430}).then(o=>{o.isConfirmed&&this._categoryService.CategoryRemove(e.categoryId).subscribe(()=>this.setGetInputsProviders(!0))})}setGetInputsProviders(e){this.component.filters.refresh=e,this.formatGetInputs()}get getDownloadUrl(){return"Category?Download=True"}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(it.O),t.Y36(D),t.Y36(c.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["vex-category-list"]],decls:21,vars:18,consts:[[1,"w-full","h-full","flex","flex-col"],[1,"px-gutter","pt-1","pb-20","bg-primary","flex-none"],["vexContainer","",1,"flex","items-center","justify-between"],[1,"headline","text-primary-contrast","m-0","flex","items-center","w-full","max-w-xxxl","mr-6"],[1,"hidden","sm:block",3,"icon"],[1,"ml-4","block"],[1,"flex","items-center","justify-end","w-full","mt-5"],[1,"flex","justify-between"],[3,"start","end","rangeDate"],[3,"buttonClick"],[1,"flex","justify-between","ml-6"],[3,"searchOptions","currentValue","search"],[3,"url","getInputs","filename"],["vexContainer","",1,"-mt-14","pt-0","overflow-hidden","flex"],[1,"bg-transparent","flex-auto","flex"],[1,"p-gutter","pt-0","flex-auto","flex","items-start"],["buttonLabel","AGREGAR",1,"hidden","sm:block","mr-6",3,"currentMenu","items","buttonShow","buttonClick","filterChange"],[1,"card","h-full","overflow-hidden","flex-auto"],[3,"service","columns","sortBy","sortDir","getInputs","rowClick"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),t._UZ(4,"ic-icon",4),t.TgZ(5,"span",5),t._uU(6,"Gesti\xf3n de Categorias"),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7)(9,"app-filter-date-range-ymd",8),t.NdJ("rangeDate",function(i){return o.searchDateRange(i)}),t.qZA(),t.TgZ(10,"app-button-reset-filters",9),t.NdJ("buttonClick",function(){return o.resetFilters()}),t.qZA()(),t.TgZ(11,"div",10)(12,"app-search-box-multiple",11),t.NdJ("search",function(i){return o.search(i)}),t.qZA()(),t.TgZ(13,"div"),t._UZ(14,"app-export-excel",12),t.qZA()()()(),t.TgZ(15,"div",13)(16,"mat-drawer-container",14)(17,"mat-drawer-content",15)(18,"app-menu",16),t.NdJ("buttonClick",function(){return o.openDialogRegister()})("filterChange",function(i){return o.setData(i)}),t.qZA(),t.TgZ(19,"div",17)(20,"app-list-table",18),t.NdJ("rowClick",function(i){return o.rowClick(i)}),t.qZA()()()()()()),2&e&&(t.xp6(4),t.Q6J("@scaleIn",void 0)("icon",o.component.icCategory),t.xp6(1),t.Q6J("@fadeInRight",void 0),t.xp6(4),t.Q6J("start",o.component.filters.startDate)("end",o.component.filters.endDate),t.xp6(3),t.Q6J("searchOptions",o.component.searchOptions)("currentValue",o.component.filters.textFilter),t.xp6(2),t.Q6J("url",o.getDownloadUrl)("getInputs",o.component.getInputs)("filename",o.component.filename),t.xp6(4),t.Q6J("currentMenu",o.component.getInputs.stateFilter)("items",o.component.menuItems)("buttonShow",!0),t.xp6(2),t.Q6J("service",o._categoryService)("columns",o.component.tableColumns)("sortBy",o.component.initialSort)("sortDir",o.component.initialSortDir)("getInputs",o.component.getInputs))},dependencies:[A.kh,A.LW,Z.ar,lt.l,E.z,R.J,S.M,L.$,N.X,G.I],data:{animation:[O.KF,M.a,J.G]}}),a})(),data:{scrollDisabled:!0,toolbarShadowEnabled:!0}}];let mt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[b.Bz.forChild(ct),b.Bz]}),a})();var ut=r(72628);let dt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[u.ez,mt,ut.m,E.z,R.J,S.M,L.$,N.X,G.I]}),a})()}}]);